# Doc2MD Agent - 文档智能转换智能体
# AI Provider 配置文件

# 复制此文件为 config.yaml 并填入你的 API Key
# cp config.example.yaml config.yaml

# 当前使用的 AI 提供商 (openai / anthropic / deepseek / zhipu / qwen / ollama / custom)
provider: "deepseek"

# 各提供商配置
providers:
  openai:
    api_key: "sk-xxx"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4o"
    max_tokens: 16000
    temperature: 0

  anthropic:
    api_key: "sk-ant-xxx"
    base_url: "https://api.anthropic.com"
    model: "claude-sonnet-4-20250514"
    max_tokens: 16000
    temperature: 0

  deepseek:
    api_key: "sk-xxx"
    base_url: "https://api.deepseek.com/v1"
    model: "deepseek-reasoner"
    max_tokens: 16000
    temperature: 0

  zhipu:  # 智谱AI
    api_key: "xxx"
    base_url: "https://open.bigmodel.cn/api/paas/v4"
    model: "glm-4-plus"
    max_tokens: 16000
    temperature: 0

  qwen:  # 通义千问
    api_key: "sk-xxx"
    base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
    model: "qwen-max"
    max_tokens: 16000
    temperature: 0

  ollama:  # 本地部署
    api_key: "ollama"
    base_url: "http://localhost:11434/v1"
    model: "qwen2.5:32b"
    max_tokens: 16000
    temperature: 0

  custom:  # 自定义 OpenAI 兼容接口
    api_key: "xxx"
    base_url: "http://your-server:8080/v1"
    model: "your-model"
    max_tokens: 16000
    temperature: 0

# 转换设置
conversion:
  # 单次发送给 AI 的最大字符数（章节内超长时继续子分片）
  chunk_size: 8000
  # 分片策略: section(按章节优先) / size(按字符)
  chunk_strategy: "section"
  # 输出语言 (zh / en / auto)
  language: "auto"
  # 是否生成目录
  generate_toc: true
  # 目录是否使用确定性算法（推荐 true，避免 AI 目录偏移）
  deterministic_toc: true
  # 严格模式：标题/错误码完整性校验，失败即重试或报错
  strict_mode: true
  # 分片转换失败的最大重试次数（总尝试次数 = 1 + 该值）
  max_chunk_retries: 2
  # 校验报错时最多展示多少个样例
  max_validation_report_items: 8
  # JSON 代码块高亮
  highlight_json: true
  # 图片输出文件夹名
  image_dir: "images"
